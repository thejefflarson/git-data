#!/usr/bin/env bash
. gitdata-functions

# Grab any unexpanded git-data files
for file in `git ls-files`
do
  if [ "$(head -c 8 $file)" = 'git-data' ]
  then
    get $(cut -f2 $file) $2 > $file
  fi
done

# Send and remove stuff in the queue
for file in `ls $(object_dir)`
do
  path=$(object_dir)/$file
  put $file $2
  rm $path
done
